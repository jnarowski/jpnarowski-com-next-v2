[
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Glob",
    "tool_input": {
      "pattern": "**/*calculator*.{tsx,ts,mdx}"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Glob",
    "tool_input": {
      "pattern": "**/experiments/**/*.{tsx,ts}"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Read",
    "tool_input": {
      "file_path": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2/src/app/experiments/page.tsx"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Bash",
    "tool_input": {
      "command": "ls -la content/articles/ | head -20",
      "description": "List articles directory structure"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Read",
    "tool_input": {
      "file_path": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2/src/components/die-with-zero/CalculatorForm.tsx"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Read",
    "tool_input": {
      "file_path": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2/src/lib/die-with-zero-calculator.ts"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Read",
    "tool_input": {
      "file_path": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2/src/app/die-with-zero/DieWithZeroCalculator.tsx"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Bash",
    "tool_input": {
      "command": "ls -la .agent/specs/ 2>/dev/null || echo \"Directory does not exist\"",
      "description": "Check if specs directory exists"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Read",
    "tool_input": {
      "file_path": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2/tsconfig.json"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Read",
    "tool_input": {
      "file_path": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2/.agent/specs/financial-tax-burden-calculator-prd.md"
    }
  },
  {
    "session_id": "a1e42854-1c25-4e16-bbd4-feb2d7b6f433",
    "transcript_path": "/Users/jnarowski/.claude/projects/-Users-jnarowski-Dev-sourceborn-src-jpnarowski-com-next-v2/a1e42854-1c25-4e16-bbd4-feb2d7b6f433.jsonl",
    "cwd": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2",
    "permission_mode": "bypassPermissions",
    "hook_event_name": "PreToolUse",
    "tool_name": "Write",
    "tool_input": {
      "file_path": "/Users/jnarowski/Dev/sourceborn/src/jpnarowski-com-next-v2/.agent/specs/financial-tax-burden-calculator-spec.md",
      "content": "# Feature: Financial Tax Burden Calculator\n\n## What We're Building\n\nA tax calculator that helps users estimate their federal tax liability on large income events (like phantom equity payouts) and model the impact of various tax reduction strategies including active business losses, real estate professional status, and oil & gas investments. The tool provides transparent calculations with URL-based state persistence for easy scenario sharing.\n\n## User Story\n\nAs a high-income individual receiving a large one-time compensation event\nI want to understand my true after-tax proceeds and evaluate different tax strategies\nSo that I can make informed decisions about whether complex tax strategies are worth pursuing\n\n## Technical Approach\n\nClient-side Next.js application with pure TypeScript calculation functions. All state persists in URL query parameters for zero-backend simplicity and easy scenario sharing. Tax calculations follow 2025 federal tax brackets with support for multiple tax reduction strategies. UI follows existing die-with-zero calculator patterns with form inputs, real-time calculations, and detailed breakdown sections.\n\n## Files to Touch\n\n### Existing Files\n\n- `src/app/layout.tsx` - Verify navigation structure supports new tool route\n- `src/lib/utils.ts` - May need utility functions for number formatting\n- `tailwind.config.ts` - Verify theme colors available for tax calculator\n- `package.json` - Verify all dependencies available (no new ones needed)\n\n### New Files\n\n- `src/app/tools/tax-calculator/page.tsx` - Main calculator page component\n- `src/lib/tax-calculator.ts` - Core tax calculation logic (pure functions)\n- `src/lib/tax-calculator.test.ts` - Unit tests for tax calculations\n- `src/components/tax-calculator/TaxCalculatorForm.tsx` - Form component for inputs\n- `src/components/tax-calculator/StrategyCard.tsx` - Reusable card for each strategy\n- `src/components/tax-calculator/TaxSummary.tsx` - Summary card showing total tax and net proceeds\n- `src/components/tax-calculator/CalculationBreakdown.tsx` - Detailed step-by-step calculations\n- `src/components/tax-calculator/StrategyEducation.tsx` - Educational section explaining strategies\n- `src/hooks/useTaxCalculatorState.ts` - URL-based state management hook\n\n## Implementation Plan\n\n### Phase 1: Foundation\n\nSet up core tax calculation engine with 2025 federal tax brackets, define data structures for all tax strategies, implement pure calculation functions that can be thoroughly tested, and document the mathematical formulas for transparency and professional verification.\n\n### Phase 2: Core Implementation\n\nBuild the form components for inputting payout amounts and strategy parameters, implement URL state management for scenario persistence, create the summary and breakdown display components, and wire up real-time recalculation on any input change.\n\n### Phase 3: Integration\n\nCompose the main page layout, add educational content explaining each strategy and qualification criteria, implement mobile-responsive design matching site aesthetics, add prominent disclaimers about educational purpose, and polish UX with validation and helpful hints.\n\n## Step by Step Tasks\n\n**IMPORTANT: Execute every step in order, top to bottom**\n\n### 1: Define Tax Calculation Data Structures\n\n<!-- prettier-ignore -->\n- [ ] Create TypeScript interfaces for tax calculator state\n        - Define `TaxCalculatorInputs` interface with base income fields\n        - Define `BusinessLossStrategy` interface (loss amount)\n        - Define `RealEstateProfessionalStrategy` interface (passive losses, REP status boolean)\n        - Define `OilInvestmentStrategy` interface (investment amount, IDC percentage)\n        - Define `TaxCalculationResult` interface with breakdown fields\n        - File: `src/lib/tax-calculator.ts`\n\n- [ ] Document 2025 federal tax brackets as constants\n        - Single filer brackets: 10%, 12%, 22%, 24%, 32%, 35%, 37%\n        - Research and document exact bracket thresholds for 2025\n        - Add standard deduction constant for 2025\n        - File: `src/lib/tax-calculator.ts`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 2: Implement Core Tax Calculation Functions\n\n<!-- prettier-ignore -->\n- [ ] Implement `calculateFederalIncomeTax()` function\n        - Takes taxable income, returns tax owed\n        - Applies 2025 progressive tax brackets\n        - Returns breakdown by bracket for transparency\n        - File: `src/lib/tax-calculator.ts`\n\n- [ ] Implement `applyStandardDeduction()` function\n        - Reduces AGI by standard deduction amount\n        - Returns adjusted taxable income\n        - File: `src/lib/tax-calculator.ts`\n\n- [ ] Implement `applyBusinessLoss()` function\n        - Reduces taxable income by active business loss\n        - No limitations for active losses (unlike passive)\n        - Returns adjusted income and savings amount\n        - File: `src/lib/tax-calculator.ts`\n\n- [ ] Implement `applyRealEstateProfessional()` function\n        - Only applies passive loss offset if REP status = true\n        - Reduces taxable income by passive losses\n        - Returns adjusted income and savings amount\n        - File: `src/lib/tax-calculator.ts`\n\n- [ ] Implement `applyOilInvestment()` function\n        - Calculates intangible drilling costs (typically 70-85% of investment)\n        - Applies IDC deduction to taxable income\n        - Returns adjusted income and savings amount\n        - File: `src/lib/tax-calculator.ts`\n\n- [ ] Implement main `calculateTaxBurden()` function\n        - Takes all inputs and enabled strategies\n        - Calculates baseline tax (no strategies)\n        - Applies each enabled strategy in order\n        - Returns comprehensive result with before/after comparison\n        - File: `src/lib/tax-calculator.ts`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 3: Write Comprehensive Unit Tests\n\n<!-- prettier-ignore -->\n- [ ] Test baseline tax calculation accuracy\n        - Test case: $1M W-2 income \u2192 verify against known tax tables\n        - Test case: $500K W-2 income \u2192 verify calculation\n        - Test case: $100K W-2 income \u2192 verify lower brackets\n        - File: `src/lib/tax-calculator.test.ts`\n        - Run: `pnpm test tax-calculator.test.ts`\n\n- [ ] Test business loss strategy\n        - Test case: $1M income with $200K business loss\n        - Verify correct reduction in taxable income\n        - Verify tax savings calculation\n        - File: `src/lib/tax-calculator.test.ts`\n\n- [ ] Test real estate professional strategy\n        - Test case: REP status = true, $150K passive losses\n        - Test case: REP status = false, same losses (should not apply)\n        - Verify passive loss offset logic\n        - File: `src/lib/tax-calculator.test.ts`\n\n- [ ] Test oil investment strategy\n        - Test case: $300K investment with 80% IDC\n        - Verify IDC deduction calculation\n        - Verify immediate tax benefit\n        - File: `src/lib/tax-calculator.test.ts`\n\n- [ ] Test combined strategies\n        - Test case: Multiple strategies applied together\n        - Verify cumulative effect on tax burden\n        - Verify order of operations doesn't break calculations\n        - File: `src/lib/tax-calculator.test.ts`\n\n- [ ] Test edge cases\n        - Test case: Income reduced below zero by strategies (should cap at $0 tax)\n        - Test case: No strategies enabled (baseline only)\n        - Test case: Zero income edge case\n        - File: `src/lib/tax-calculator.test.ts`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 4: Create URL State Management Hook\n\n<!-- prettier-ignore -->\n- [ ] Implement `useTaxCalculatorState` custom hook\n        - State includes: w2Income, phantomEquityPayout, annualIncome\n        - State includes: enabled strategies and their parameters\n        - Encode state to URL query params on change\n        - Decode state from URL on mount (with hydration handling)\n        - Use JSON.stringify + base64 encoding for compactness\n        - File: `src/hooks/useTaxCalculatorState.ts`\n\n- [ ] Add default values for clean initial state\n        - Default: $200K W-2 income, $500K phantom payout\n        - Default: All strategies disabled\n        - Returns `{ state, setState, isHydrated }` like die-with-zero calculator\n        - File: `src/hooks/useTaxCalculatorState.ts`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 5: Build TaxCalculatorForm Component\n\n<!-- prettier-ignore -->\n- [ ] Create base income input section\n        - Input: Annual W-2 Income (base salary)\n        - Input: Phantom Equity Payout (one-time)\n        - Use `InputGroup` component with dollar prefix\n        - Add number formatting with commas\n        - File: `src/components/tax-calculator/TaxCalculatorForm.tsx`\n\n- [ ] Add help text and validation\n        - Help text explaining each field\n        - Validate positive numbers only\n        - Show formatted preview of total income\n        - File: `src/components/tax-calculator/TaxCalculatorForm.tsx`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 6: Build StrategyCard Components\n\n<!-- prettier-ignore -->\n- [ ] Create `StrategyCard` base component\n        - Props: title, description, enabled (checkbox), children\n        - Collapsible design (expand when enabled)\n        - Card styling matching die-with-zero patterns\n        - File: `src/components/tax-calculator/StrategyCard.tsx`\n\n- [ ] Build Business Loss Strategy card\n        - Checkbox to enable/disable\n        - Input: Total active business losses\n        - Help text: \"Active trade or business losses (Section 162)\"\n        - File: `src/components/tax-calculator/TaxCalculatorForm.tsx`\n\n- [ ] Build Real Estate Professional Strategy card\n        - Checkbox to enable/disable\n        - Checkbox: \"I qualify as Real Estate Professional\"\n        - Input: Total passive losses from real estate\n        - Help text explaining REP requirements (750+ hours, material participation)\n        - Link to IRS documentation\n        - File: `src/components/tax-calculator/TaxCalculatorForm.tsx`\n\n- [ ] Build Oil Investment Strategy card\n        - Checkbox to enable/disable\n        - Input: Total investment amount\n        - Input: IDC percentage (default 80%, range 70-85%)\n        - Help text explaining intangible drilling costs\n        - Show calculated IDC deduction amount\n        - File: `src/components/tax-calculator/TaxCalculatorForm.tsx`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 7: Build TaxSummary Component\n\n<!-- prettier-ignore -->\n- [ ] Create summary card with key metrics\n        - Display: Total income (W-2 + phantom equity)\n        - Display: Tax without strategies (baseline)\n        - Display: Tax with strategies (optimized)\n        - Display: Total tax savings\n        - Display: Net proceeds after tax\n        - File: `src/components/tax-calculator/TaxSummary.tsx`\n\n- [ ] Add visual styling for impact\n        - Large text for net proceeds (most important number)\n        - Green highlight for tax savings amount\n        - Progressive disclosure: show/hide details toggle\n        - File: `src/components/tax-calculator/TaxSummary.tsx`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 8: Build CalculationBreakdown Component\n\n<!-- prettier-ignore -->\n- [ ] Create simplified story-problem summary at top\n        - Natural language description: \"Starting with $X income...\"\n        - Show each strategy applied in sequence with savings\n        - Final result: \"You save $X in taxes\"\n        - Easy to understand at a glance\n        - File: `src/components/tax-calculator/CalculationBreakdown.tsx`\n\n- [ ] Create detailed calculation section below\n        - Collapsible \"View Detailed Calculations\" accordion\n        - Step-by-step breakdown of baseline tax calculation\n        - Show each tax bracket applied with amounts\n        - Show standard deduction application\n        - File: `src/components/tax-calculator/CalculationBreakdown.tsx`\n\n- [ ] Add strategy-specific breakdowns\n        - For each enabled strategy, show detailed math\n        - Business loss: show income reduction and bracket impact\n        - REP: show passive loss offset calculation\n        - Oil investment: show IDC calculation (investment \u00d7 percentage)\n        - Include formulas that a CPA can verify\n        - File: `src/components/tax-calculator/CalculationBreakdown.tsx`\n\n- [ ] Add visual formatting for readability\n        - Use tables for bracket calculations\n        - Monospace font for numbers\n        - Indent nested calculations\n        - Color-code additions/subtractions (green/red)\n        - File: `src/components/tax-calculator/CalculationBreakdown.tsx`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 9: Build StrategyEducation Component\n\n<!-- prettier-ignore -->\n- [ ] Create education section for each strategy\n        - Accordion-style collapsible sections\n        - One section per strategy\n        - File: `src/components/tax-calculator/StrategyEducation.tsx`\n\n- [ ] Write Business Loss Strategy education\n        - What it is: Active trade or business losses under Section 162\n        - Who qualifies: Material participation in the business\n        - How it works: Directly reduces ordinary income\n        - Considerations: Must be active, not passive losses\n        - File: `src/components/tax-calculator/StrategyEducation.tsx`\n\n- [ ] Write Real Estate Professional Strategy education\n        - What it is: IRS designation allowing passive loss deductions\n        - Who qualifies: 750+ hours real estate work, >50% of work time\n        - How it works: Converts passive losses to active losses\n        - Considerations: Strict documentation requirements, material participation\n        - Link to IRS Publication 925\n        - File: `src/components/tax-calculator/StrategyEducation.tsx`\n\n- [ ] Write Oil Investment Strategy education\n        - What it is: Intangible drilling costs (IDC) deduction\n        - Who qualifies: Direct participation in oil/gas partnerships\n        - How it works: 70-85% of investment deductible immediately\n        - Considerations: Active participation required, complex investment\n        - File: `src/components/tax-calculator/StrategyEducation.tsx`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 10: Create Main Calculator Page\n\n<!-- prettier-ignore -->\n- [ ] Build page structure and metadata\n        - File: `src/app/tools/tax-calculator/page.tsx`\n        - Add metadata: title, description for SEO\n        - Set up page container with proper spacing\n        - Follow layout patterns from die-with-zero calculator\n\n- [ ] Add hero section with title and description\n        - Title: \"Financial Tax Burden Calculator\"\n        - Subtitle explaining phantom equity use case\n        - Prominent disclaimer: \"Educational estimates only - not tax advice\"\n        - File: `src/app/tools/tax-calculator/page.tsx`\n\n- [ ] Compose calculator layout\n        - Section 1: TaxCalculatorForm (inputs and strategies)\n        - Section 2: TaxSummary (key results)\n        - Section 3: CalculationBreakdown (detailed math)\n        - Section 4: StrategyEducation (learning section)\n        - File: `src/app/tools/tax-calculator/page.tsx`\n\n- [ ] Wire up state management\n        - Use `useTaxCalculatorState` hook\n        - Pass state to form and display components\n        - Calculate tax burden with `useMemo` for performance\n        - Update on any input change\n        - File: `src/app/tools/tax-calculator/page.tsx`\n\n- [ ] Add loading and hydration handling\n        - Show loading state while hydrating URL params\n        - Handle missing or malformed URL params gracefully\n        - File: `src/app/tools/tax-calculator/page.tsx`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 11: Add Share Functionality\n\n<!-- prettier-ignore -->\n- [ ] Implement share button\n        - Button in hero section: \"Share This Scenario\"\n        - Use Web Share API if available\n        - Fallback: Copy URL to clipboard\n        - Show success toast/message\n        - File: `src/app/tools/tax-calculator/page.tsx`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 12: Add Disclaimers and Legal Text\n\n<!-- prettier-ignore -->\n- [ ] Create prominent disclaimer section\n        - Place at top of page (hero section)\n        - Text: \"This calculator provides educational estimates only and should not be considered tax, financial, or legal advice. Consult qualified professionals before making tax decisions.\"\n        - Styling: Muted background, visible but not overwhelming\n        - File: `src/app/tools/tax-calculator/page.tsx`\n\n- [ ] Add footer disclaimer\n        - Detailed disclaimer at bottom of page\n        - Cover: not tax advice, 2025 tax year only, accuracy limitations\n        - Recommendation to consult CPA/tax attorney\n        - File: `src/app/tools/tax-calculator/page.tsx`\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 13: Style and Polish UX\n\n<!-- prettier-ignore -->\n- [ ] Apply consistent styling\n        - Purple accent colors (`text-primary`, `bg-primary`)\n        - Dark mode support throughout\n        - Generous whitespace (Apple-inspired)\n        - Geist Sans typography\n        - Match die-with-zero calculator aesthetics\n\n- [ ] Add mobile responsiveness\n        - Test all breakpoints (mobile, tablet, desktop)\n        - Stack strategy cards vertically on mobile\n        - Ensure inputs are touch-friendly\n        - Test calculation breakdown readability on small screens\n\n- [ ] Add helpful UX touches\n        - Placeholder text in all inputs\n        - Input validation with error messages\n        - Auto-format numbers with commas\n        - Show calculated values in real-time\n        - Disable strategy inputs when checkbox unchecked\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n### 14: Manual Testing and Validation\n\n<!-- prettier-ignore -->\n- [ ] Test baseline calculation accuracy\n        - Input: $1M W-2 income, verify against tax tables\n        - Expected: ~$325K federal tax (verify exact amount)\n        - Manual verification: Use IRS tax calculator\n\n- [ ] Test business loss strategy\n        - Scenario: $1M income, $200K business loss\n        - Verify tax reduction matches expectations\n        - Check detailed breakdown shows correct math\n\n- [ ] Test real estate professional strategy\n        - Scenario 1: REP enabled, $150K passive losses\n        - Scenario 2: REP disabled, same losses (should not apply)\n        - Verify checkbox logic works correctly\n\n- [ ] Test oil investment strategy\n        - Scenario: $300K investment, 80% IDC\n        - Verify $240K deduction applied\n        - Check immediate tax savings calculation\n\n- [ ] Test combined strategies\n        - Enable all three strategies simultaneously\n        - Verify cumulative effect is correct\n        - Check detailed breakdown shows all steps\n\n- [ ] Test URL persistence\n        - Fill out complex scenario\n        - Copy URL\n        - Open in new tab/window\n        - Verify all inputs and checkboxes restored\n\n- [ ] Test mobile experience\n        - Open on phone or responsive mode\n        - Verify all inputs accessible\n        - Check calculation breakdown readable\n        - Test share button functionality\n\n#### Completion Notes\n\n(This will be filled in by the agent implementing this phase)\n\n## Acceptance Criteria\n\n**Must Work:**\n\n- [ ] User can input W-2 income and phantom equity payout amounts\n- [ ] User can enable/disable each tax strategy independently\n- [ ] Baseline tax calculation matches IRS tax tables (within $5K)\n- [ ] Business loss strategy correctly reduces taxable income\n- [ ] Real estate professional strategy only applies when REP checkbox enabled\n- [ ] Oil investment strategy calculates IDC correctly (investment \u00d7 percentage)\n- [ ] Tax summary shows before/after comparison with savings\n- [ ] Simplified calculation story displays at top of breakdown\n- [ ] Detailed calculation breakdown shows step-by-step math for CPA verification\n- [ ] All state persists in URL and restores on page reload\n- [ ] Share button copies URL to clipboard (or uses Web Share API)\n- [ ] Disclaimers are prominent and clearly state \"not tax advice\"\n- [ ] Design matches site aesthetics (purple accents, dark mode, Geist fonts)\n- [ ] Mobile responsive design works on all screen sizes\n\n**Should Not:**\n\n- [ ] Show strategy inputs when strategy is disabled\n- [ ] Calculate negative tax amounts (should cap at $0)\n- [ ] Break on invalid/malformed URL parameters\n- [ ] Lose state on page refresh\n- [ ] Show incorrect tax bracket calculations\n\n## Validation\n\nExecute these commands to verify the feature works correctly:\n\n**Automated Verification:**\n\n    # Build verification\n    pnpm build\n    # Expected: Successful build with no errors\n\n    # Type checking\n    pnpm tsc --noEmit\n    # Expected: No type errors\n\n    # Linting\n    pnpm lint\n    # Expected: No lint errors\n\n    # Unit tests\n    pnpm test tax-calculator.test.ts\n    # Expected: All tests pass, tax calculations accurate\n\n**Manual Verification:**\n\n1. Start application: `pnpm dev`\n2. Navigate to: `http://localhost:3000/tools/tax-calculator`\n3. Verify: Page loads with default values\n4. Test: Enter $1M W-2 income \u2192 verify baseline tax displays\n5. Test: Enable business loss strategy with $200K loss \u2192 verify tax reduction\n6. Test: Enable REP strategy with $150K passive losses \u2192 verify deduction applied\n7. Test: Disable REP checkbox \u2192 verify passive losses no longer apply\n8. Test: Enable oil investment with $300K investment \u2192 verify IDC deduction\n9. Test: Copy URL \u2192 open in new tab \u2192 verify all inputs restored\n10. Check console: No errors or warnings\n\n**Feature-Specific Checks:**\n\n- Baseline tax on $1M income should be approximately $325K (verify exact amount with IRS tables)\n- Business loss of $200K should reduce taxable income to $800K and save ~$74K in taxes\n- REP strategy should only work when checkbox is enabled\n- Oil investment IDC should calculate correctly (e.g., $300K \u00d7 80% = $240K deduction)\n- Detailed breakdown should show every tax bracket applied with amounts\n- All three strategies combined should show cumulative effect\n- URL should update immediately when any input changes\n- Mobile view should be fully functional and readable\n\n## Definition of Done\n\n- [ ] All tasks completed\n- [ ] All unit tests passing (tax calculations accurate)\n- [ ] Lint and type checks pass\n- [ ] Manual testing confirms all acceptance criteria met\n- [ ] No console errors\n- [ ] Code follows existing patterns (die-with-zero calculator style)\n- [ ] Disclaimers are prominent and legally appropriate\n- [ ] Mobile responsive design tested\n- [ ] URL persistence works perfectly\n- [ ] Calculation breakdown shows both simplified and detailed versions\n- [ ] Educational content written for all three strategies\n\n## Notes\n\n### Tax Calculation Formula Reference\n\n**2025 Federal Tax Brackets (Single Filer):**\n- 10%: $0 - $11,600\n- 12%: $11,601 - $47,150\n- 22%: $47,151 - $100,525\n- 24%: $100,526 - $191,950\n- 32%: $191,951 - $243,725\n- 35%: $243,726 - $609,350\n- 37%: $609,351+\n\n**Standard Deduction 2025:** $14,600 (single filer)\n\n**Progressive Tax Calculation Example:**\nFor $1,000,000 taxable income:\n1. First $11,600 \u00d7 10% = $1,160\n2. Next $35,550 \u00d7 12% = $4,266\n3. Next $53,375 \u00d7 22% = $11,743\n4. Next $91,425 \u00d7 24% = $21,942\n5. Next $51,775 \u00d7 32% = $16,568\n6. Next $365,625 \u00d7 35% = $127,969\n7. Remaining $390,650 \u00d7 37% = $144,541\n**Total Tax: $328,189**\n\n**Business Loss Strategy:**\n- Directly reduces AGI (Adjusted Gross Income)\n- Must be from active trade or business (Section 162)\n- No dollar limitation for active losses\n- Applied before standard deduction\n\n**Real Estate Professional Strategy:**\n- Requires 750+ hours in real estate activities\n- More than 50% of personal services time\n- Material participation in rental activities\n- Converts passive losses to active losses\n- Passive losses otherwise limited to passive income\n\n**Oil & Gas Investment Strategy:**\n- Intangible Drilling Costs (IDC) typically 70-85% of investment\n- Deductible in year incurred (immediate benefit)\n- Requires direct participation (not limited partnership)\n- Tangible costs (15-30%) capitalized and depreciated\n\n### Future Enhancements (Out of Scope)\n\n- State income tax calculations\n- Alternative Minimum Tax (AMT)\n- Net Investment Income Tax (NIIT) 3.8%\n- Qualified Business Income (QBI) deduction\n- Capital gains vs ordinary income distinction\n- Multi-year tax planning\n- Itemized deductions vs standard deduction toggle\n- Marriage filing status options\n- Scenario comparison (side-by-side)\n- Export to PDF functionality\n- Integration with real estate depreciation schedules\n"
    }
  }
]